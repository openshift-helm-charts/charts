# TokenVisor secrets template
# Fill in the placeholders and apply once:
#   kubectl apply -f charts/tokenvisor/docs/SECRETS_TEMPLATE.yaml
# Or, if using a packaged chart:
#   kubectl apply -f tokenvisor/docs/SECRETS_TEMPLATE.yaml
#
# IMPORTANT SECURITY NOTES:
# 1. ClickHouse stores passwords in XML configuration files
# 2. DO NOT use XML special characters in passwords: < > & ' "
# 3. These characters will break ClickHouse XML parsing
# 4. Use only alphanumeric characters and simple symbols: a-z, A-Z, 0-9, -, _
# 5. Example good passwords: emupassword, my-secure-pw-2025, Pass1234
# 6. Example BAD passwords (will fail): <password>, "x&y&z", 'quote', tag >

apiVersion: v1
kind: Secret
metadata:
  name: clickhouse-secret
  namespace: tokenvisor
type: Opaque
stringData:
  cluster_secret: "clickhouse-cluster-secret"
  # IMPORTANT: Use simple alphanumeric passwords only (no XML special chars)
  db_user_password: "emupassword"
  db_readonly_user_password: "emureadonlypassword"
---
apiVersion: v1
kind: Secret
metadata:
  name: pg-emu-user-secret
  namespace: tokenvisor
type: kubernetes.io/basic-auth
stringData:
  username: "emupg"
  password: "emupg-password"
---
apiVersion: v1
kind: Secret
metadata:
  name: vmuser-secret
  namespace: tokenvisor
type: Opaque
stringData:
  password: "vmuser-password"
---
# Optional: EMU provider/API keys (remove keys you do not use)
apiVersion: v1
kind: Secret
metadata:
  name: emu-secret
  namespace: tokenvisor
type: Opaque
stringData:
  EMU_OPENAI_API_KEY: ""
  # NOTE: password must match pg-emu-user-secret.password
  # NOTE: keep this value in sync with values.yaml emu.config.EMU_DB_PATH
  EMU_DB_PATH: "postgresql+psycopg://emupg:emupg-password@tokenvisor-pgbouncer.tokenvisor.svc.cluster.local:5432/emu"
  EMU_HUGGINGFACE_API_KEY: ""
  EMU_SERVICE_KEY: "emu-service-key"
  EMU_OPENROUTER_API_KEY: ""
  EMU_ANTHROPIC_API_KEY: ""
  EMU_CEREBRAS_API_KEY: ""
  EMU_COHERE_API_KEY: ""
  EMU_GEMINI_API_KEY: ""
  EMU_GROQ_API_KEY: ""
  EMU_HYPERBOLIC_API_KEY: ""
  EMU_JINA_AI_API_KEY: ""
  EMU_SAMBANOVA_API_KEY: ""
  EMU_TOGETHER_AI_API_KEY: ""
  EMU_VOYAGE_API_KEY: ""
  EMU_RESEND_API_KEY: ""
---
# Required: Studio auth secret and service key (used by Studio)
apiVersion: v1
kind: Secret
metadata:
  name: studio-secret
  namespace: tokenvisor
type: Opaque
stringData:
  STUDIO_AUTH_SECRET: "studio-auth-secret"
---
apiVersion: v1
kind: Secret
metadata:
  name: vmuser-secret
  namespace: tokenvisor
type: Opaque
stringData:
  password: "vmuser-password"
---
# Optional: Grafana credentials (if Grafana enabled in Helm values)
apiVersion: v1
kind: Secret
metadata:
  name: grafana-secret
  namespace: tokenvisor
type: Opaque
stringData:
  admin_password: ""
